# マルウェア解析者になるための勉強方法(work-in-progress)

`これは@PINKSAWTOOTHの私見で、必ずしもあなたにとって一番良い方法ではないかもしれません。勉強方法の一例として参照しもらえれば幸いです。`

これを読む前に、僕が尊敬するマルウェア解析者の@hasherezade氏がマルウェア解析の勉強をどのように始めたらよいかをブログにしています。
重複する部分があると思いますが、一読することをおすすめします。また、以下のブログは英語のソースが中心なので、可能な限り日本語を中心にしたソースを紹介したいと思います。

https://hshrzd.wordpress.com/how-to-start/

# マルウェア解析の前提となる知識

まず、マルウェア解析の前提となる知識について簡単に説明します。
マルウェア解析について学ぶ前に、最低限コンピュータサイエンス(計算機科学)の知識が必要になります。

- コンピュータアーキテクチャ
- コンピュータネットワーク
- オペレーティングシステム
- プログラミング言語
- データ構造とアルゴリズム
- etc...

これらについては、大学や専門学校で履修するないようが理解できていればよいかと思います。
(どこかの大学のオンラインシラバス等を確認することで、より具体的な内容を知れるかと思います。)
本稿では、コンピュータサイエンスをどのように学ぶかはスコープ外としますが、以下がおすすめの資料です。

- [コンピュータはなぜ動くのか 知っておきたいハードウエア＆ソフトウエアの基礎知識](https://www.nikkeibp.co.jp/atclpubmkt/book/03/P81650/)
- [プログラムはなぜ動くのか 第３版　知っておきたいプログラミングの基礎知識] (https://www.nikkeibp.co.jp/atclpubmkt/book/21/S00190/)
- [インテル® 64および IA-32 アーキテクチャのソフトウェア開発者向けマニュアル (最新)](https://software.intel.com/content/www/us/en/develop/articles/intel-sdm.html)
- [IA-32 インテル® アーキテクチャー・ソフトウェア・デベロッパーズ・マニュアル、上巻: 基本アーキテクチャー (日本語:古い)](http://www.intel.co.jp/content/dam/www/public/ijkk/jp/ja/documents/developer/IA32_Arh_Dev_Man_Vol1_Online_i.pdf)
- [IA-32 インテル® アーキテクチャー・ソフトウェア・デベロッパーズ・マニュアル、中巻 A: 命令セット・リファレンス A-M(日本語:古い)](http://www.intel.co.jp/content/dam/www/public/ijkk/jp/ja/documents/developer/IA32_Arh_Dev_Man_Vol2A_i.pdf)
- [IA-32 インテル® アーキテクチャー・ソフトウェア・デベロッパーズ・マニュアル、中巻 B: 命令セット・リファレンス N-Z(日本語:古い)](http://www.intel.co.jp/content/dam/www/public/ijkk/jp/ja/documents/developer/IA32_Arh_Dev_Man_Vol2B_i.pdf)
- [IA-32 インテル® アーキテクチャー・ソフトウェア・デベロッパーズ・マニュアル、下巻: システム・プログラミング・ガイド(日本語:古い)](http://www.intel.co.jp/content/dam/www/public/ijkk/jp/ja/documents/developer/IA32_Arh_Dev_Man_Vol3_i.pdf)

## マルウェア解析に必要となる知識

マルウェア解析に必要となる知識を大きく以下の4つに分けます。

- マルウェアの挙動、悪用するテクニックの実装や実現方法に関する知識
- リバースエンジニアリング対象のプログラム開発に関する知識
- リバースエンジニアリングに関する知識
- リバースエンジニアリングツールに関する知識

### リバースエンジニアリング対象のプログラム開発に関する知識

リバースエンジニアリングは、マルウェア解析において一部でしかありませんが、マルウェア解析者になるためには避けて通れない道です。
サンドボックスを使った動的解析やツールを使った動的解析(手動でおこなうデバッグを除く)だけでは、マルウェアの機能の全容や使用されているアルゴリズムを特定することは困難です。

リバースエンジニアリングをおこなうためには、元のソースコードについて理解しておく必要があります。
（マルウェア解析で一般的なWindows環境を想定しますが）Windows APIを使ったプログラミングの経験なしにマルウェア解析をするのは遠回りになるでしょう。

幸いなことにWindows APIはMicrosoftが公式のドキュメントを公開しており、詳細についてはWeb上で確認することができます。
`日本語のページがある場合がありますが、英語のページのほうが記載が充実しています。Google翻訳を使ってもいいので英語版を読むようにしましょう。`

https://docs.microsoft.com/en-us/

例としてCreateFile関数の[ページ](https://docs.microsoft.com/ja-jp/windows/win32/api/fileapi/nf-fileapi-createfilea)を記載します。

![image](https://user-images.githubusercontent.com/18203311/120811986-89e9f480-c587-11eb-8bb0-61c8d4e10a91.png)

また、Windows APIのサンプルも同ページに記載されている場合があります。こういった　　

![image](https://user-images.githubusercontent.com/18203311/120793123-792e8400-c571-11eb-836b-2b7f2305fb8c.png)
![image](https://user-images.githubusercontent.com/18203311/120795426-68cbd880-c574-11eb-8c07-923b07d91803.png)

